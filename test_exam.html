<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Exam</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; }
      main { max-width: 820px; }
      fieldset { margin: 1rem 0; padding: 1rem; }
      legend { font-weight: 600; }
      label { display: block; margin: 0.25rem 0; }
      .row { margin: 1rem 0; }
      button[disabled] { opacity: .5; cursor: not-allowed; }
    </style>
  </head>
  <body>
    <main>
      <h1>Exam</h1>

      <form id="exam-form">
        <fieldset>
          <legend>1) 2 + 2 = ?</legend>
          <label><input type="radio" name="q1" value="3">3</label>
          <label><input type="radio" name="q1" value="4">4</label>
          <label><input type="radio" name="q1" value="5">5</label>
        </fieldset>

        <fieldset>
          <legend>2) Select all prime numbers</legend>
          <label><input type="checkbox" name="q2" value="2">2</label>
          <label><input type="checkbox" name="q2" value="3">3</label>
          <label><input type="checkbox" name="q2" value="4">4</label>
          <label><input type="checkbox" name="q2" value="5">5</label>
        </fieldset>

        <fieldset>
          <legend>3) Select all even numbers</legend>
          <label><input type="checkbox" name="q3" value="1">1</label>
          <label><input type="checkbox" name="q3" value="2">2</label>
          <label><input type="checkbox" name="q3" value="3">3</label>
          <label><input type="checkbox" name="q3" value="4">4</label>
        </fieldset>

        <div class="row">
          <label for="q4">4) 5 + 7 =</label>
          <input id="q4" name="q4" type="text" autocomplete="off" />
        </div>

        <div class="row">
          <label for="q5">5) âˆš81 =</label>
          <input id="q5" name="q5" type="text" autocomplete="off" />
        </div>

        <div class="row">
          <button id="submit" type="submit" disabled>Submit</button>
        </div>
      </form>
    </main>

    <script>
      (function () {
        const form = document.getElementById('exam-form');
        const submitBtn = document.getElementById('submit');

        function isComplete() {
          const q1Answered = form.querySelector('input[name="q1"]:checked') !== null;
          const q2Answered = form.querySelectorAll('input[name="q2"]:checked').length > 0;
          const q3Answered = form.querySelectorAll('input[name="q3"]:checked').length > 0;
          const q4 = form.q4.value.trim() !== '';
          const q5 = form.q5.value.trim() !== '';
          return q1Answered && q2Answered && q3Answered && q4 && q5;
        }

        function updateButton() {
          submitBtn.disabled = !isComplete();
        }

        form.addEventListener('input', updateButton);
        form.addEventListener('change', updateButton);
        updateButton();

        form.addEventListener('submit', function (e) {
          e.preventDefault();
          if (!isComplete()) return;

          let score = 0;

          // Q1: correct is 4
          if (form.querySelector('input[name="q1"]:checked')?.value === '4') score += 1;

          // Q2: primes are 2,3,5
          const q2Sel = Array.from(form.querySelectorAll('input[name="q2"]:checked')).map(i => i.value);
          const q2Correct = new Set(['2','3','5']);
          const q2All = ['2','3','4','5'];
          const q2Ok = q2All.every(v => q2Correct.has(v) === q2Sel.includes(v));
          if (q2Ok) score += 1;

          // Q3: evens are 2,4
          const q3Sel = Array.from(form.querySelectorAll('input[name="q3"]:checked')).map(i => i.value);
          const q3Correct = new Set(['2','4']);
          const q3All = ['1','2','3','4'];
          const q3Ok = q3All.every(v => q3Correct.has(v) === q3Sel.includes(v));
          if (q3Ok) score += 1;

          // Q4: 12
          if (form.q4.value.trim() === '12') score += 1;
          // Q5: 9
          if (form.q5.value.trim() === '9') score += 1;

          const params = new URLSearchParams({ score: String(score), total: '5' });
          window.location.href = 'success.html?' + params.toString();
        });
      })();
    </script>
  </body>
  </html>

